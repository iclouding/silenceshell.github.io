<!DOCTYPE html>
<html>

	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?28bfa356a7c60e170822a01142cf208e";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Hibernate之Hello World</title>
  <meta name="description" content="Hibernate是一个优秀的持久化框架，其主要功能是将内存里的瞬时状态，通过JDBC持久化到硬盘数据库上。Hibernate以面向对象的思想来解决数据库的问题，可以简化数据库的访问。这篇文章通过一个简单的示例，来建立Hibernate的初步认识，较水，记录用。示例代码基本是从这篇文章里抄来的。首先，得有一个~~...">
  
  <meta name="author" content="伊布">
  <meta name="copyright" content="&copy; 伊布 2016">
  

  <!-- External libraries -->
  <!--<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> -->
  <link href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/solarized-dark.min.css">
  <!--<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/monokai_sublime.min.css">-->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="Hibernate是一个优秀的持久化框架，其主要功能是将内存里的瞬时状态，通过JDBC持久化到硬盘数据库上。Hibernate以面向对象的思想来解决数据库的问题，可以简化数据库的访问。这篇文章通过一个简单的示例，来建立Hibernate的初步认识，较水，记录用。示例代码基本是从这篇文章里抄来的。首先，得有一个~~..." />
  <meta property="og:url" content="http://silenceshell.gitcafe.io" />
  <meta property="og:site_name" content="Zlatan Eevee" />
  <meta property="og:title" content="Hibernate之Hello World" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://silenceshell.gitcafe.io/assets/instacode.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Hibernate之Hello World">
  <meta name="twitter:description" content="Hibernate是一个优秀的持久化框架，其主要功能是将内存里的瞬时状态，通过JDBC持久化到硬盘数据库上。Hibernate以面向对象的思想来解决数据库的问题，可以简化数据库的访问。这篇文章通过一个简单的示例，来建立Hibernate的初步认识，较水，记录用。示例代码基本是从这篇文章里抄来的。首先，得有一个~~...">
  <meta name="twitter:image" content="http://silenceshell.gitcafe.io/assets/instacode.png">
  <meta name="twitter:url" content="http://silenceshell.gitcafe.io">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://silenceshell.gitcafe.io/tech/2015/06/11/hibernate-hello.html">
  <link rel="alternate" type="application/rss+xml" title="Zlatan Eevee" href="http://silenceshell.gitcafe.io/feed.xml" />
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Zlatan Eevee">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        
          
          <li class="nav-link"><a href="/about/">About</a>
          
        
          
        
          
        
          
        
          
          <li class="nav-link"><a href="/posts/">Posts</a>
          
        
          
          <li class="nav-link"><a href="/typography/">Typography</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(/assets/instacode.png);">
  <div class="scrim has-cover">
    <header class="post-header">
      <h1 class="title">Hibernate之Hello World</h1>
      <p class="info">by <strong>伊布</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">June 11, 2015</div>
  <div class="post-categories">
  in 
    
    <a href="/category/tech">Tech</a>
    
  
  </div>
</section>  

<article class="post-content">
  <p>Hibernate是一个优秀的持久化框架，其主要功能是将内存里的瞬时状态，通过JDBC持久化到硬盘数据库上。Hibernate以面向对象的思想来解决数据库的问题，可以简化数据库的访问。
这篇文章通过一个简单的示例，来建立Hibernate的初步认识，较水，记录用。</p>

<p>示例代码基本是从这篇<a href="http://www.javaweb.cc/architecture/hibernate/132325.shtml">文章</a>里抄来的。</p>

<p>首先，得有一个~~女朋友~~表。我在mytest数据库里创建了一个student表。
<code class="highlighter-rouge">sql
CREATE TABLE `student` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(255) default NULL,
  `password` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
) ;
</code></p>

<h3 id="hibernate">1、创建工程，导入Hibernate库。</h3>
<p>我下载的版本是4.3.10，从<a href="http://hibernate.org/orm/downloads/">官方网站</a>上下载下来的是Hibernate ORM（hibernate-release-4.3.10.Final.zip）。要导入的lib文件在<code class="highlighter-rouge">.\hibernate-release-4.3.10.Final\lib\required\</code>，其他的先不管（我也不知道干啥用的）。
想不起来当时怎么把lib导入到IDEA了，现在导入没有图标了。</p>

<h3 id="comxxxhibernatest">2、建立包<code class="highlighter-rouge">com.xxx.hibernatest</code></h3>

<h3 id="section">3、建立实体类的映射</h3>
<p>在hibernatest包里新建Student.hbm.xml文件，编写对象关系映射文件，把对象关系映射的逻辑放在此处，这个文件包括表和字段的对象关系，当操作对象时，该文件通过java反射机制产生的方法，会把对象的方法转为关系的方法。</p>

<p>```xml
<?xml version="1.0"?>
&lt;!DOCTYPE hibernate-mapping PUBLIC
        “-//Hibernate/Hibernate Mapping DTD 3.0//EN”
        “http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd”&gt;</p>

<hibernate-mapping package="com.dtdream.hibernatest">

    <class name="Student" table="student">
        <id name="id">
            <generator class="native" />
        </id>
        <property name="name" />
        <property name="age" />
    </class>

</hibernate-mapping>
<p>```</p>

<h3 id="section-1">4、对象类定义。</h3>
<p>在hibernatest包里新建Student.java。它对应于数据库的一个具体的表，需要定义数据库的列、列方法等，实际就是用Java来描述表。</p>

<p>```java
package com.dtdream.hibernatest;</p>

<p>public class Student {
    private int id;
    private String name;
    private  int age;
    public int getId() {
        return id;
    }
    public String getName() {
        return name;
    }
    public int getAge() {
        return age;
    }
    public void setId(int id) {
        this.id = id;
    }
    public void setName(String name) {
        this.name = name;
    }
    public void setAge(int age) {
        this.age = age;
    }
}
```</p>

<h3 id="main">5、main入口</h3>
<p>这里可以看到Hibernate简单的用法，代码看一看很清楚，就不多说了，名字随便起。</p>

<p>```java
package com.dtdream.hibernatest;</p>

<p>import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;</p>

<p>public class StudentTest {
    public static void main(String[] args) {
        Student s = new Student();
        //s.setId();	这句不需要，我们创建的数据库是increasement的
        s.setAge(23);
        s.setName(“dtd”);</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    Configuration cfg = new Configuration();
    SessionFactory sf = cfg.configure().buildSessionFactory();
    Session session = sf.openSession();
    session.beginTransaction();
    session.save(s);
    session.getTransaction().commit();
    session.close();
    sf.close();
} } ```
</code></pre>
</div>

<h3 id="hibernate-1">6、Hibernate主配置</h3>
<p>前面我们有了数据库操作主流程，有了对象关系映射文件，有了表的对象，表在前面也创建了，那么就剩下怎么访问数据库了：地址、端口号、数据库名、driver。
这里提供一个<code class="highlighter-rouge">hibernate.cfg.xml</code>的数据库配置文件。配置文件放到工程的根目录，不要放到包里。
Hibernate实际是封装了JDBC，需要对应数据库的driver lib，对端数据库用的是mysql，所以需要把mysql-connector-java-5.1.35-bin也加到project的lib库里。
配置文件就不说了，照着葫芦画瓢就行。</p>

<p>```xml
<?xml version='1.0' encoding='utf-8'?>
&lt;!DOCTYPE hibernate-configuration PUBLIC
        “-//Hibernate/Hibernate Configuration DTD 3.0//EN”
        “http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd”&gt;</p>
<hibernate-configuration>
<session-factory>
    <!-- Database connection settings -->
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://192.168.5.29:3306/mytest</property>
    <property name="connection.username">root</property>
    <property name="connection.password"></property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>
    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <!-- Enable Hibernate's automatic session context management -->
    <property name="current_session_context_class">thread</property>
    <!-- Disable the second-level cache  -->
    <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>
    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>
    <!-- Drop and re-create the database schema on startup -->
    <property name="hbm2ddl.auto">update</property>
    <mapping resource="com/dtdream/hibernatest/Student.hbm.xml" />
</session-factory>
</hibernate-configuration>
<p>```</p>

<p>好了，有了上面4个文件，一个简单的Hibernate示例就完成了，run main文件，我们去看mysql数据库里，可以看到添加了一条记录：</p>

<p><code class="highlighter-rouge">sql
mysql&gt; select * from student;
+----+--------+----------+------+
| id | name   | password | age  |
+----+--------+----------+------+
|  1 | dtd    | NULL     |   23 |
+----+--------+----------+------+
1 rows in set (0.01 sec)
</code></p>

<p>再运行一次，可以看到又添加了一条记录：</p>

<p><code class="highlighter-rouge">bash
mysql&gt; select * from student;
+----+--------+----------+------+
| id | name   | password | age  |
+----+--------+----------+------+
|  1 | dtd    | NULL     |   23 |
|  2 | dtd    | NULL     |   23 |
+----+--------+----------+------+
2 rows in set (0.01 sec)
</code></p>

<p>至此，示例结束，以后有机会用Hibernate做一些实际的事情再来分享更深入的东西。</p>

</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/hibernate">hibernate</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=Hibernate%E4%B9%8BHello+World&url=http://silenceshell.gitcafe.io/tech/2015/06/11/hibernate-hello.html&via=瓶子"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
  
    
    
    
    
    
    
  
</section>



</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Zlatan Eevee</h3>

    <div class="site-navigation">
      
      <p><strong>Site Map</strong></p>
      <ul class="pages">
        
        
          <li class="nav-link"><a href="/about/">About</a>
        
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/posts/">Posts</a>
        
        
        
          <li class="nav-link"><a href="/typography/">Typography</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:hubottle@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">hubottle@gmail.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://twitter.com/hubottle" title="Follow me on Twitter">
              <i class="fa fa-twitter"></i>
              <span class="username">瓶子</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://github.com/silenceshell" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">silenceshell</span>
            </a>
          </li>
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text"></p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>
<script>

$(document).ready(function() {

  // Syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });


});

</script>




  </body>

</html>
